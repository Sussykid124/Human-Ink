<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LLM Markdown Chat</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    textarea, input { width: 100%; margin-bottom: 10px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; }
    button { padding: 10px 20px; border: none; border-radius: 8px; background: #007bff; color: white; cursor: pointer; }
    button:hover { background: #0056b3; }
    #responseBox { background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #ddd; }
    label { font-weight: bold; margin-top: 10px; display: block; }
  </style>
  <!-- Load Marked.js for Markdown support -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

  <h1>üß† LLM Response Viewer</h1>

  <label for="systemPrompt">‚öôÔ∏è System Prompt</label>
  <textarea id="systemPrompt" rows="2" placeholder="E.g., You are a teacher who explains using bullet points."></textarea>

  <button onclick="sendPrompt()">Send Hardcoded Prompt</button>

  <h3>üìú LLM Markdown Response:</h3>
  <div id="responseBox">Waiting for response...</div>
  <button onclick="copyResponse()">üìã Copy Rendered Text</button>

  <script>
    const API_KEY = "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";
    const MODEL = "deepseek/deepseek-chat-v3-0324:free";
    const HARDCODED_PROMPT = "You are a rewriting engine that makes robotic or unnatural AI text sound fluent, expressive, and natural like a human wrote it. Use simple vocab and think your trying to pass ai detector test. Maintain the original meaning but adjust the tone and flow as requested";

    async function sendPrompt() {
      const systemPrompt = document.getElementById("systemPrompt").value.trim();
      const messages = [];

      if (systemPrompt) {
        messages.push({ role: "system", content: systemPrompt });
      }

      messages.push({ role: "user", content: HARDCODED_PROMPT });

      document.getElementById("responseBox").innerHTML = "<em>‚è≥ Thinking...</em>";

      try {
        const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${API_KEY}`,
            "HTTP-Referer": "http://localhost",
            "X-Title": "Markdown Chat App"
          },
          body: JSON.stringify({
            model: MODEL,
            messages: messages
          })
        });

        const data = await res.json();
        const rawMarkdown = data?.choices?.[0]?.message?.content || "‚ùå No response received.";
        const html = marked.parse(rawMarkdown);
        document.getElementById("responseBox").innerHTML = html;
      } catch (error) {
        document.getElementById("responseBox").innerHTML = `<b>üö´ Error:</b> ${error.message}`;
      }
    }

    function copyResponse() {
      const tempDiv = document.createElement("div");
      tempDiv.innerHTML = document.getElementById("responseBox").innerHTML;
      const plainText = tempDiv.textContent || tempDiv.innerText || "";
      navigator.clipboard.writeText(plainText).then(() => {
        alert("‚úÖ Response copied as plain text!");
      });
    }
  </script>

</body>
</html>
